<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>iSensor-SPI-Buffer: sd_card.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Analog-Devices-Logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">iSensor-SPI-Buffer
   &#160;<span id="projectnumber">1.4</span>
   </div>
   <div id="projectbrief">Firmware for the STM32F303 to enable full throughput buffered data capture on Analog Devices IMUs</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a class="el" href="dir_e2489e887f17afa3cbc07a4ec152cdd2.html">Inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sd_card.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header file for iSensor-SPI-Buffer SD card interfacing and script execution module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="script_8h_source.html">script.h</a>&quot;</code><br />
<code>#include &quot;fatfs.h&quot;</code><br />
<code>#include &quot;<a class="el" href="registers_8h_source.html">registers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer_8h_source.html">timer.h</a>&quot;</code><br />
</div>
<p><a href="sd__card_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3744cf20327e23a2afb57c9051a55d75"><td class="memItemLeft" align="right" valign="top"><a id="a3744cf20327e23a2afb57c9051a55d75"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SCRIPT_MAX_ENTRIES</b>&#160;&#160;&#160;64</td></tr>
<tr class="separator:a3744cf20327e23a2afb57c9051a55d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a625b0dce0e53a68e74b117c8ced97afe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8h.html#a625b0dce0e53a68e74b117c8ced97afe">SDCardInit</a> ()</td></tr>
<tr class="memdesc:a625b0dce0e53a68e74b117c8ced97afe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init SD card hardware interface and FATFs driver.  <a href="sd__card_8h.html#a625b0dce0e53a68e74b117c8ced97afe">More...</a><br /></td></tr>
<tr class="separator:a625b0dce0e53a68e74b117c8ced97afe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade0e1d4a61790fd47ec542cbf559af68"><td class="memItemLeft" align="right" valign="top"><a id="ade0e1d4a61790fd47ec542cbf559af68"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ScriptAutorun</b> ()</td></tr>
<tr class="separator:ade0e1d4a61790fd47ec542cbf559af68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32b1dbc0c13c1814f562104c761f8d6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8h.html#a32b1dbc0c13c1814f562104c761f8d6c">ScriptStep</a> ()</td></tr>
<tr class="memdesc:a32b1dbc0c13c1814f562104c761f8d6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Step the script execution process.  <a href="sd__card_8h.html#a32b1dbc0c13c1814f562104c761f8d6c">More...</a><br /></td></tr>
<tr class="separator:a32b1dbc0c13c1814f562104c761f8d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3549a7ed2c1d2569224b55e2d286c0e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8h.html#a3549a7ed2c1d2569224b55e2d286c0e8">StartScript</a> ()</td></tr>
<tr class="memdesc:a3549a7ed2c1d2569224b55e2d286c0e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start script run.  <a href="sd__card_8h.html#a3549a7ed2c1d2569224b55e2d286c0e8">More...</a><br /></td></tr>
<tr class="separator:a3549a7ed2c1d2569224b55e2d286c0e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6088aedec2b1022a826a94f45805854"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8h.html#ad6088aedec2b1022a826a94f45805854">StopScript</a> ()</td></tr>
<tr class="memdesc:ad6088aedec2b1022a826a94f45805854"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop a running SD card script.  <a href="sd__card_8h.html#ad6088aedec2b1022a826a94f45805854">More...</a><br /></td></tr>
<tr class="separator:ad6088aedec2b1022a826a94f45805854"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for iSensor-SPI-Buffer SD card interfacing and script execution module. </p>
<p>Copyright (c) Analog Devices Inc, 2020 All Rights Reserved.</p>
<dl class="section date"><dt>Date</dt><dd>7/28/2020 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>A. Nolan (<a href="#" onclick="location.href='mai'+'lto:'+'ale'+'x.'+'nol'+'an'+'@an'+'al'+'og.'+'co'+'m'; return false;">alex.<span style="display: none;">.nosp@m.</span>nola<span style="display: none;">.nosp@m.</span>n@ana<span style="display: none;">.nosp@m.</span>log.<span style="display: none;">.nosp@m.</span>com</a>) </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a32b1dbc0c13c1814f562104c761f8d6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32b1dbc0c13c1814f562104c761f8d6c">&#9670;&nbsp;</a></span>ScriptStep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ScriptStep </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Step the script execution process. </p>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function is called from the main loop. It is responsible for performing the actual script execution, and writing the output to the SD card. </p>

</div>
</div>
<a id="a625b0dce0e53a68e74b117c8ced97afe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a625b0dce0e53a68e74b117c8ced97afe">&#9670;&nbsp;</a></span>SDCardInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SDCardInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init SD card hardware interface and FATFs driver. </p>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function configures the SPI3 port for use with an SD card and inits all GPIO as needed. This function is called directly by the application on startup. It does not attempt to connect to the SD card in any way.lked right into tha </p>

</div>
</div>
<a id="a3549a7ed2c1d2569224b55e2d286c0e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3549a7ed2c1d2569224b55e2d286c0e8">&#9670;&nbsp;</a></span>StartScript()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StartScript </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start script run. </p>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function checks if an SD card is connected, then sets up the FAT file system if there is a card. Once the file system is set up, "script.txt" is read and parsed, if it exists. Once the script has been processed, the script execution state variables are initialized, and the script is kicked off. The actual script execution work occurs in <a class="el" href="sd__card_8c.html#a32b1dbc0c13c1814f562104c761f8d6c" title="Step the script execution process.">ScriptStep()</a>, which is called periodically from the main cyclic executive loop. </p>

</div>
</div>
<a id="ad6088aedec2b1022a826a94f45805854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6088aedec2b1022a826a94f45805854">&#9670;&nbsp;</a></span>StopScript()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StopScript </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop a running SD card script. </p>
<dl class="section return"><dt>Returns</dt><dd>void</dd></dl>
<p>This function can be invoked by the user (via the script cancel command), or will run automatically once the script execution process has finished. It clears the script running flags and the script active STATUS register bit. It then closes the output text file and unmounts from the SD card. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
